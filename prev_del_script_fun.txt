document.addEventListener('DOMContentLoaded', async () => {
    const productsContainer = document.querySelector('.products-container');

    try {
        const response = await fetch('/api/books');
        const books = await response.json();

        // Clear existing content
        productsContainer.innerHTML = '';

        // Dynamically create book boxes
        books.forEach(book => {
            const bookBox = document.createElement('div');
            bookBox.classList.add('box');

            bookBox.innerHTML = `
                <img src="${book.Book_image}" alt="${book.Book_name}">
                <h3>${book.Book_name}</h3>
                <div class="content">
                    <span>$${book.price}</span>
                    <a href="/book/${book.id}" target="_blank">Buy</a>
                </div>
            `;

            productsContainer.appendChild(bookBox);
        });
    } catch (error) {
        console.error('Error fetching books:', error);
    }
});

added new function as ::


document.addEventListener('DOMContentLoaded', () => {
    const uploadForm = document.getElementById('uploadForm');

    uploadForm.addEventListener('submit', async (event) => {
        event.preventDefault();

        const bookName = document.getElementById('bookName').value;
        const price = document.getElementById('price').value;
        const bookImage = document.getElementById('bookImage').value;

        try {
            const response = await fetch('/api/upload', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ bookName, price, bookImage }),
            });

            const result = await response.json();
            if (response.ok) {
                alert(result.message);
                uploadForm.reset();
            } else {
                alert(result.error);
            }
        } catch (error) {
            console.error('Error uploading book:', error);
            alert('Failed to upload book');
        }
    });
});